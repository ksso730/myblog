---
title: /JPA-연관관계 매핑
tags: [JPA]
categories: [JPA]
img: <img width="25" alt="inflearn2" src="https://user-images.githubusercontent.com/28856435/74893276-55244f00-53cf-11ea-8a6d-90ac0c4eb72a.png">
thumbnail: ''
permalink: ''
date: 2020-02-23 23:32:55
---

연관관계 매핑에서의 @ManyToOne, @OneToMany 사용법과
연관관계 주인을 지정해본다.
<!-- excerpt -->
<!-- toc -->

### 연관관계 매핑

> 단방향, 양방향 매핑이 있다. 항상 기본이 되는것은 단방향 매핑이고, 여기에 양방향으로 조회를 가능토록 해준다면 양방향.
여기서는 양방향에 단방향이 포함되므로 양방향을 기록하도록 하겠다.

설계를 구두화하자면,
MEMBER, ORDERS, ORDERITEM, ITEM 테이블이 존재한다.

각 테이블의 연관관계는 아래와 같다.

|TABLES|RELATION|table(FK)|
|-------|--------|----|
|MEMBER : ORDERS | 1 : N | ORDERS(MEMBER_ID) |
|ORDERS : ORDERITEM | 1 : N | ORDERITEM(ORDER_ID) |
|ORDERITEM : ITEM | N : 1 | ORDERITEM(ITEM_ID) |

#### @ManyToOne
>1:N 관계에서 N 인쪽 객체에 설정해준다.
위 연관관계를 기준으로 MEMBER 는 여러 ORDER 를 생성할 수 있다.

```Java
@ManyToOne
@Column("MEMBER_ID")
private List<Member> member = new ArrayList<>();
```

#### 연관관계 주인

그럼 아래와 같이 객체가 만들어진다.



__Member.java__
```java
@Entity
public class Member {
    @Id
    @GeneratedValue
    @Column(name = "MEMBER_ID")
    private Long id;

    private String name;
    private String city;
    private String street;
    private String zipcode;

    @OneToMany(mappedBy = "member")
    private List<Order> orders = new ArrayList<Order>();
}
```

